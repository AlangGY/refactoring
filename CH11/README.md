### 11.1 질의 함수와 변경 함수 분리하기

#### 절차

1. 대상 함수를 복제하고 질의 목적에 충실한 이름을 짓는다.
   - 함수 내부에서 반환 할 값을 찾고, 그 값에 어울리는 이름을 짓는다.
2. 새 질의 함수에서 부수 효과를 모두 제거한다.
3. 정적 검사를 수행한다.
4. 원래 함수를 호출하는 곳을 모두 찾아낸다. 호출하는 곳에서 반환 값을 사용한다면, 질의 함수를 호출하도록 변경한다. 그 후, 원래 함수를 호출하는 코드를 아래에 추가한다. 수정 후 테스트한다.
5. 원래 함수에서 질의 관련 코드를 제거한다.
6. 테스트한다.

- 궁금한점: 동일 모듈내에서 사용되는 함수를 모킹할때는 어떻게 해야하는지??

### 11.2 함수 매개변수화하기

#### 절차

1. 비슷한 함수 중 하나를 선택한다.
2. 함수 선언 바꾸기로 리터럴들을 매개변수로 추가한다.
3. 이 함수를 호출하는 곳 모두에 적절한 리터럴 값을 추가한다.
4. 테스트한다.
5. 매개변수로 받은 값을 사용하도록 함수 본문을 수정한다. 하나 수정할 때마다 테스트한다.
6. 비슷한 다른 함수를 호출하는 코드를 찾아 매개변수화된 함수를 호출하도록 하나씩 수정한다. 하나 수정할 때마다 테스트한다.

느낀점: 맥락을 잘 파악하면, 리팩토링의 길이 보인다.

### 11.3 플래그 인수 제거하기

#### 팁

함수 하나에서 플래그 인수를 두개 이상 사용하면, 중복 코드 방지를 위해 사용할 수 밖에 없긴하지만, 해당 함수가 너무 많은 일을 처리하고 있다는 신호가 되기도 하다.

#### 절차

1. 매개변수로 주어질 수 있는 값 각각에 대응하는 명시적 함수들을 생성한다.
2. 원래 함수를 호출하는 코드들을 찾아서 각 리터럴 값에 대응되는 명시적 함수를 호출한다.

### 11.4 객체 통째로 넘기기

#### 객체를 통째로 넘길때 생기는 장점

1. 그 함수가 더 다양한 데이터를 사용하도록 바뀌어도 매개변수 수정 할 필요가 없다.
2. 매개변수 목록이 짧아져서 함수 사용법을 이해하기 쉬워진다.

#### 하지만 너무 동떨어진 레코드와 함수 관계는, 의존도를 줄이기 위해 사용하지 않을때도 있다.

#### 절차

1. 매개변수들을 원하는 형태로 받는 빈 함수를 만든다.
2. 새 함수의 본문에서는 원래 함수를 호출하도록 하며, 새 매개변수와 원래 함수의 매개변수를 매핑한다.
3. 정적 검사를 수행한다.
4. 모든 호출자가 새 함수를 사용하게 수정한다. 하나씩 수정하며 테스트한다.
5. 호출자를 모두 수정했다면 원래 함수를 인라인한다.
6. 새 함수의 이름을 적절히 수정하고 모든 호출자에 반영한다.
